<!DOCTYPE html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>xml unstyled</title>
</head>

<body>
<p id='info'></p>
<p><button type="button" onclick="measure()">measure</button> &nbsp; <span id='results'><span></p>
<iframe id='test' width='40px' height='600px' src='xmlunstyled.xml'></iframe>
<iframe id='visual' height='600px' src='xmlunstyled.xml'></iframe>
</div>

<script>
'use strict';
// https://searchfox.org/firefox-main/source/dom/locales/en-US/dom = XMLPrettyPrint

let isLocale, isLanguage
try {
	isLocale = Intl.DateTimeFormat().resolvedOptions().locale
} catch(e) {
	isLocale = 'error'
	console.log(e)
}
try {
	isLanguage = navigator.language
} catch(e) {
	isLanguage = 'error'
	console.log(e)
}
document.getElementById('info').innerHTML = 'language: '+ isLanguage +' | locale: '+ isLocale

let target = document.getElementById('test'),
	visual = document.getElementById('visual')

console.log('TARGET\n======')
console.log(target)
console.log(target.contentDocument)

// we need to wait for the xml file to load
	// just stick it behind a button for now
function measure() {
	let testheight, visualheight
	try {
		testheight = target.contentDocument.firstChild.getBoundingClientRect().height
	} catch(e) {
		console.log('testheight',e)
		testheight = 'error'
	}

	try {
		visualheight = visual.contentDocument.firstChild.getBoundingClientRect().height
	} catch(e) {
		console.log('visualheight',e)
		visualheight = 'error'
	}
	document.getElementById('results').innerHTML = 'test: '+ testheight +' | visual: '+ visualheight
}
</script>
</body>
</html>

